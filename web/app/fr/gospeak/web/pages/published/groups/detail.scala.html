@import com.mohiva.play.silhouette.api.actions.UserAwareRequest
@import fr.gospeak.core.domain.{Cfp, Group, Event, Sponsor, Venue, Partner, SponsorPack}
@import fr.gospeak.libs.scalautils.domain.Page
@import fr.gospeak.web.auth.domain.CookieEnv
@import fr.gospeak.web.domain.Breadcrumb
@import fr.gospeak.web.pages.partials.html._
@import fr.gospeak.web.pages.partials.display.html.markdown
@import fr.gospeak.web.pages.published.partials.html.container
@import fr.gospeak.web.pages.published.cfps.routes.CfpCtrl

@(group: Group, cfps: Seq[Cfp], events: Page[(Event, Option[(Venue, Partner)])], sponsors: Seq[(Sponsor, Partner, SponsorPack)], packs: Seq[SponsorPack])(b: Breadcrumb)(implicit req: UserAwareRequest[CookieEnv, AnyContent], messages: Messages)
@container(group.name.value + " - Gospeak", b)() {
    <h1 class="d-flex justify-content-between align-items-center">
        <span>@group.name.value</span>
        @cfps.length match {
            case 0 => {}
            case 1 => {
                <a class="btn btn-primary" href="@CfpCtrl.propose(cfps.head.slug)">Propose a talk</a>
            }
            case _ => {
                <div class="dropdown d-flex">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownTalkProposal" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Propose a talk</button>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownTalkProposal">
                    @cfps.map { cfp =>
                        <a class="dropdown-item" href="@CfpCtrl.propose(cfp.slug)">@cfp.name.value</a>
                    }
                    </div>
                </div>
            }
        }
    </h1>
    <div class="row">
        <div class="col">
            @events.items.map { case (event, venueOpt) =>
                <div>@event.name.value @venueOpt.map { case (v, p) => at @p.name.value }</div>
            }
        </div>
        <div class="col">
            <h3>About</h3>
            <blockquote class="blockquote">@markdown(group.description)</blockquote>
            <h3>Follow us</h3>
            <p>TODO</p>
            <h3>Sponsors</h3>
            @sponsors.map { case (s, p, sp) =>
                <div>@p.name.value</div>
            }
        </div>
    </div>
}()
