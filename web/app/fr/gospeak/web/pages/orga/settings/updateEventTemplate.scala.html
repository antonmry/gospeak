@import com.mohiva.play.silhouette.api.actions.SecuredRequest
@import fr.gospeak.core.domain.Group
@import fr.gospeak.core.domain.utils.TemplateData
@import fr.gospeak.libs.scalautils.domain.MarkdownTemplate
@import fr.gospeak.web.auth.domain.CookieEnv
@import fr.gospeak.web.pages.orga.settings.routes.SettingsCtrl
@import fr.gospeak.web.pages.partials.display.html._
@import fr.gospeak.web.pages.orga.partials.html.container
@import fr.gospeak.web.pages.partials.form.html._
@import fr.gospeak.web.domain.Breadcrumb

@(group: Group, templateId: String, eventSettings: Form[MarkdownTemplate[TemplateData.EventInfo]])(b: Breadcrumb)(implicit req: SecuredRequest[CookieEnv, AnyContent], messages: Messages)
@container(group.name.value + "settings - Gospeak", group, b)() {
    <h1>Update Event default description</h1>

    @formElt(eventSettings, SettingsCtrl.doUpdateEventTemplate(group.slug, templateId)) {
        <div class="row">
            <div class="col-6">
                @fieldVertical(eventSettings("template"), Seq("label" -> "Your template:")) { (field, args) =>
                    @inputTemplate(field, Some(TemplateData.EventInfo.ref), args = args ++ Seq("autofocus" -> "true"))
                }
            </div>
            <div class="col-6">
                @displayTemplateData(Some(TemplateData.EventInfo.ref))
            </div>
        </div>
        @actionsVertical() {
            @btnCancel(SettingsCtrl.list(group.slug))
            @btnSubmit("Update Event default description")
        }
    }
}()
