@import fr.gospeak.core.domain.{Cfp, Group, Proposal, Event, User}
@import fr.gospeak.web.user.groups.cfps.proposals.routes.ProposalCtrl
@import fr.gospeak.web.user.groups.speakers.routes.SpeakerCtrl
@import fr.gospeak.web.user.groups.events.routes.EventCtrl
@import fr.gospeak.web.utils.Formats._
@import fr.gospeak.web.partials.display.html.{proposalStatusIcon, duration, speakerAvatar, videoIcon, slidesIcon}

@(group: Group, cfp: Cfp, proposal: Proposal, speakers: Seq[User], events: Seq[Event])
<div class="list-group-item d-flex justify-content-between align-items-center">
    <div>
        <h5 class="mb-1">
            <span>@proposalStatusIcon(proposal.status)</span>
            <a href="@ProposalCtrl.detail(group.slug, cfp.slug, proposal.id)">@proposal.title.value</a>
            <small>@duration(proposal.duration)</small>
        </h5>
        <span>
            Proposed @date(proposal.info.created)
            @proposal.event.flatMap(id => events.find(_.id == id)).map { event => Planned for <a href="@EventCtrl.detail(group.slug, event.slug)" title="on @date(event.start)">@event.name.value</a> }
            @proposal.video.map { video => @videoIcon(Some(video)) }
            @proposal.slides.map { slides => @slidesIcon(Some(slides)) }
        </span>
    </div>
    <div>@proposal.speakers.toList.map { id => @speakerAvatar(speakers, id, Some(s => SpeakerCtrl.detail(group.slug, s.slug))) }</div>
</div>
