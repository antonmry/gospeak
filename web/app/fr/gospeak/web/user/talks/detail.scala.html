@import fr.gospeak.core.domain.utils.Page
@import fr.gospeak.core.domain.{Group, Proposal, Talk, User}
@import fr.gospeak.web.domain.{Breadcrumb, HeaderInfo}
@import fr.gospeak.web.partials.html.container
@import fr.gospeak.web.user.talks.proposals.routes.ProposalCtrl
@import fr.gospeak.web.user.talks.proposing.routes.ProposingCtrl

@(talk: Talk, proposals: Page[(Group, Proposal)])(h: HeaderInfo, b: Breadcrumb)(implicit user: User)
@container("Gospeak", h, Some(b))() {
    <div>
        <span class="float-right">
            <a class="btn btn-primary" href="@ProposingCtrl.list(talk.slug)">Find group to propose this talk</a>
        </span>
        <h1>@talk.title.value</h1>
    </div>

    <p>@talk.description</p>

    @if(proposals.total.value == 0) {
        <h2>Talk not submitted yet</h2>
    } else {
        <h2>Submitted to</h2>

        <ul>
            @proposals.items.map { case (group, proposal) =>
            <li><a href="@ProposalCtrl.detail(talk.slug, proposal.id)">@group.name.value (@proposal.title.value)</a></li>
            }
            @if(!proposals.isLast) {
                <li><a href="@ProposalCtrl.list(talk.slug)">More...</a></li>
            }
        </ul>
    }
}()
