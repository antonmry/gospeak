@import gospeak.core.domain.{Group, User}
@import gospeak.core.domain.utils.Constants
@import gospeak.web.pages.partials.display.html._
@import gospeak.web.pages.published.groups.routes.GroupCtrl
@import gospeak.web.utils.Formats

@(group: Group.Full, orgas: Seq[User])
<a class="card mb-3" href="@GroupCtrl.detail(group.slug)">
    <div class="card-body p-3">
        <div class="media">
            <img class="u-lg-avatar rounded-circle" src="@group.logo.map(_.url.value).getOrElse(Constants.Placeholders.groupLogo)" alt="@group.name.value logo">
            <div class="media-body pl-3">
                <h2 class="h5 mb-0">@group.name.value</h2>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <small class="text-muted">@group.location.map { l => @l.valueShort }.getOrElse{ &nbsp; }</small><br>
                        <small class="text-dark">@Formats.plural(group.eventCount, "event")</small> @tags(group.tags)
                    </div>
                    <ul class="list-inline mr-2 mb-0">
                        @group.owners.toList.map { id =>
                            @orgas.find(_.id == id).map { user =>
                                <li class="list-inline-item ml-n3 mr-0">
                                    <img class="u-sm-avatar u-sm-avatar--bordered rounded-circle" src="@user.avatar.url.value" alt="@user.name.value avatar" title="@user.name.value" data-toggle="tooltip">
                                </li>
                            }.getOrElse {
                                <li class="list-inline-item ml-n3 mr-0">
                                    <img class="u-sm-avatar u-sm-avatar--bordered rounded-circle" src="@Constants.Placeholders.unknownUser" alt="Unknown user avatar" title="Unknown user" data-toggle="tooltip">
                                </li>
                            }
                        }
                    </ul>
                </div>
            </div>
        </div>
    </div>
</a>
